<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>portfolio_master card</title>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=79c0df25605b0f7facb1369d9be6fe68"></script>
    <!-- mask 스타일값 생성 -->
    <style>
      .default{
        position: absolute;
        top: -99999px;
      }
      .mask{
        width: 100%; height: 100vh; background: #212121;
        position: fixed; top: 0; left: 0; z-index: 100;
        transition: opacity 2s; opacity: 1;
        display: flex; justify-content: center; align-items: center;
        font: bold 40px/1 'arial'; color: #f3f3f3;
      }
      .mask.off{
        opacity: 0;
      }
    </style>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>

    <!-- cashing mask 생성 -->
    <div class="default"></div>
    <div class="mask">LOADING...</div>

    <script>
      const imgs = [
        // 'http://localhost:3001/portfolio_mastercard/img/Header_video.mp4',
        'http://gimziae.github.io/portfolio_mastercard/img/gallery_sub.jpeg',
        'http://gimziae.github.io/portfolio_mastercard/img/department_sub.jpeg',
        'http://gimziae.github.io/portfolio_mastercard/img/join_sub.jpeg',
      ];
      const vids = [
        'http://gimziae.github.io/portfolio_mastercard/img/Header_video.mp4',
      ]
      const lenImg = imgs.length;
      const lenVid = vids.length;

      const defaults = document.querySelector('.default');
      const mask = document.querySelector('.mask');
      let tags = '';

      imgs.forEach(src=>{
        tags +=`<img src=${src} />`;
      });

      vids.forEach(src=>{
        tags +=`<video src=${src} />`;
      });

      defaults.innerHTML = tags;

      const imgDOM = defaults.querySelectorAll('img');
      let conuntImg = 0;
      let loadedImg = false;

      imgDOM.forEach(img=>{
        img.onload = () => {
          count++;
          if(count === len) loadedImg = true;
        }
      });

      const vidDOM = defaults.querySelectorAll('video');
      let countVid = 0;
      let loadedVid = false;

      vidDOM.forEach(vid => {
        vid.onloadeddata = () => {
          count++;
          if(countVid === lenVid) loadedVid = true;
        }
      });

      if(loadedImg && loadedVid){
        defaults.remove();
        mask.classList.add('off');
        setTimeout(()=>mask.remove(), 2000);        
      }


    </script>
  </body>
</html>
