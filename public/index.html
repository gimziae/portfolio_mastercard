<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="utf-8" />
  <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>portfolio_master card</title>
  <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=79c0df25605b0f7facb1369d9be6fe68"></script>
  <!-- mask 스타일값 생성 -->
  <style>
    /* .default{
        position: absolute;
        top: -99999px;
      }
      .mask{
        width: 100%; height: 100vh; background: #212121;
        position: fixed; top: 0; left: 0; z-index: 100;
        transition: opacity 2s; opacity: 1;
        display: flex; justify-content: center; align-items: center;
        font: bold 40px/1 'arial'; color: #f3f3f3;
      }
      .mask.off{
        opacity: 0;
      } */
  </style>
</head>

<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="root"></div>

  <!-- cashing mask 생성 -->
  <!-- <div class="default"></div>
    <div class="mask">LOADING...</div>

    <script>
      const imgs = [
        // gimziae.github.io
        'http://gimziae.github.io/portfolio_mastercard/img/gallery_sub.jpeg',
        'http://gimziae.github.io/portfolio_mastercard/img/department_sub.jpeg',
        'http://gimziae.github.io/portfolio_mastercard/img/join_sub.jpeg',
      ];

      const vids = [
        'http://gimziae.github.io/portfolio_mastercard/img/Header_video.mp4',
        'http://gimziae.github.io/portfolio_mastercard/img/community.mp4',
      ];

      const lenImg = imgs.length;
      const lenVid = vids.length;

      const defaults = document.querySelector('.default');
      const mask = document.querySelector('.mask');
      let tags = '';

      let loadedImg = false;
      let loadedVid = false;

      createDOM();

      Promise
      .all([loadImg(), loadVid()])
      .then(result=>{
        const [loadedImg, loadedVid] = result;

        if(loadedImg && loadedVid){
          defaults.remove();
          mask.classList.add("off");
          setTimeout(()=> mask.remove(), 2000);
        }
      })

      function createDOM(){
        imgs.forEach(src=>{
          tags +=`<img src=${src} />`;
        });

        vids.forEach(src=>{
          tags +=`<video src=${src} />`;
        }); 

        defaults.innerHTML = tags;                
      }

      // 모든 img 로딩완료되면 promise 객체 생성
      function loadImg(){
        return new Promise((res,rej)=>{
          const imgDOM = defaults.querySelectorAll("img");
          let countImg = 0;

          imgDOM.forEach(img => {
            img.onload = () => {
              countImg++;
              if(countImg===lenImg){
                loadedImg = true;
                res(loadedImg);
              }
            }
          })
        })
      }

      //모든 vid 로딩완료되면 promise 객체 생성
      function loadVid(){
        return new Promise((res,rej)=>{
          const vidDOM = defaults.querySelectorAll("video");
          let countVid = 0;

          vidDOM.forEach(vid => {
            vid.onloadeddata = () => {
              countVid++;
              if(countVid === lenVid){
                loadedVid = true;
                res(loadedVid);
              }
            }
          })
        })
      }
    </script> -->
</body>

</html>